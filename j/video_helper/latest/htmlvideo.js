var video={colors:{scrubber_bg:"#000",scrubber_progress:"#666",scrubber_playback:"#FFF"},mTypes:{mp4:"video/mp4",ogv:"video/ogg",webm:"video/webm"},isMobile:!1,isFS:!1,zindex:null,poster:null,proxy:null,container:null,controller:null,bigplay:null,bigsound:null,replay:null,spinner:null,autoplay:!1,startmuted:!1,replaywithsound:!1,firstTime:!0,playhead:0,duration:0,buffered:0,pbar:null,phead:null,hasposter:!1,allowfullscreen:!1,videoset:!1,init:function(e){if("object"==typeof e?$&&(video.container=document.getElementById(e.attr("id"))):video.container=document.getElementById(e),video.container.style.backgroundColor="#000",video.container.style.overflow="hidden",document.defaultView&&document.defaultView.getComputedStyle){var o=document.defaultView.getComputedStyle(video.container,"");video.zindex=parseInt(o.getPropertyValue("z-index"),10)}else video.container.currentStyle&&(video.zindex=parseInt(video.container.currentStyle.zIndex,10));video.zindex||(video.zindex=0,console.log("z-index for video container element not detected, make sure position property is set")),document.addEventListener("fullscreenchange",function(){console.log(document.fullscreen),video.isFS=!1},!1),document.addEventListener("mozfullscreenchange",function(){console.log(document.mozFullScreen),video.isFS=!1},!1),document.addEventListener("webkitfullscreenchange",function(){console.log(document.webkitIsFullScreen),video.isFS=!1},!1);var i=document.createElement("div");i.id="v_player",i.style.zIndex=video.zindex,i.style.position="absolute",video.container.appendChild(i),video.poster=document.createElement("img"),video.poster.id="v_poster",video.poster.style.zIndex=video.zindex+2,video.poster.style.position="absolute",video.poster.style.backgroundColor="#000",video.poster.style.display="block",video.poster.style.width="100%",video.poster.style.height="100%",video.container.appendChild(video.poster),video.controller=document.createElement("div"),video.controller.id="v_controls",video.controller.style.display="block",video.controller.style.zIndex=video.zindex+1,video.controller.style.position="relative",video.controller.style.height="25px",video.controller.style.width="100%",video.controller.style.top=video.container.offsetHeight-25,video.controller.style.left=0,video.container.appendChild(video.controller);var t=document.createElement("div");t.id="v_controls_cbg",t.style.display="block",t.style.position="absolute",t.style.backgroundColor="#000",t.style.opacity=.6,t.style.width="100%",t.style.height=25,video.controller.appendChild(t);var l=document.createElement("div");l.style.position="relative",l.style.float="left",l.style.top=5,l.style.marginLeft=10,l.style.height=15,l.style.width=15,video.controller.appendChild(l);var d=document.createElement("span");d.id="v_controls_btn_play",d.className="cbtn fa fa-play",d.style.display="block",d.style.position="absolute",d.style.cursor="pointer",d.style.color="#FFF",d.style.fontSize=15,l.appendChild(d);var n=document.createElement("span");if(n.id="v_controls_btn_pause",n.className="cbtn fa fa-pause",n.style.display="block",n.style.position="absolute",n.style.cursor="pointer",n.style.color="#FFF",n.style.fontSize=15,n.style.display="none",l.appendChild(n),video.allowfullscreen){var s=document.createElement("span");s.id="v_controls_btn_fs",s.className="cbtn fa fa-expand",s.style.display="block",s.style.float="right",s.style.position="relative",s.style.cursor="pointer",s.style.color="#FFF",s.style.top=5,s.style.marginRight=10,video.controller.appendChild(s)}var r=document.createElement("div");r.style.position="relative",r.style.float="right",r.style.top=4,r.style.marginRight=10,r.style.height=15,r.style.width=15,r.style.textAlign="left",video.controller.appendChild(r);var a=document.createElement("span");a.id="v_controls_btn_mute",a.className="cbtn fa fa-volume-up",a.style.display="block",a.style.position="absolute",a.style.cursor="pointer",a.style.color="#FFF",a.style.fontSize=18,r.appendChild(a);var v=document.createElement("span");v.id="v_controls_btn_unmute",v.className="cbtn fa fa-volume-off",v.style.display="block",v.style.position="absolute",v.style.cursor="pointer",v.style.color="#FFF",v.style.fontSize=18,v.style.display="none",r.appendChild(v);var y=document.createElement("div");y.id="v_controls_scrubber",y.style.position="absolute",y.style.display="block",y.style.height=4,y.style.width="100%",y.style.top=-4,y.style.cursor="pointer",y.style.backgroundColor=video.colors.scrubber_bg,video.controller.appendChild(y),video.pbar=document.createElement("div"),video.pbar.id="v_controls_scrubber_progress",video.pbar.style.position="absolute",video.pbar.style.display="block",video.pbar.style.height="100%",video.pbar.style.width=0,video.pbar.style.top=0,video.pbar.style.backgroundColor=video.colors.scrubber_progress,y.appendChild(video.pbar),video.phead=document.createElement("div"),video.phead.id="v_controls_scrubber_playback",video.phead.style.position="absolute",video.phead.style.display="block",video.phead.style.height="100%",video.phead.style.width=0,video.phead.style.top=0,video.phead.style.backgroundColor=video.colors.scrubber_playback,y.appendChild(video.phead),video.bigplay=document.createElement("span"),video.bigplay.id="v_controls_btn_bigplay",video.bigplay.className="cbtn v_controls_bb fa fa-play-circle-o fa-4x",video.bigplay.style.zIndex=video.zindex+3,video.bigplay.style.display="block",video.bigplay.style.position="absolute",video.bigplay.style.cursor="pointer",video.bigplay.style.color="#FFF",video.bigplay.style.textShadow="0px 0px 14px rgba(0, 0, 0, 1)",video.container.appendChild(video.bigplay),video.bigplay.style.top=(video.container.offsetHeight-video.bigplay.offsetHeight)/2,video.bigplay.style.left=(video.container.offsetWidth-video.bigplay.offsetWidth)/2,video.bigplay.style.display="none",video.replay=document.createElement("span"),video.replay.id="v_controls_btn_bigreplay",video.replay.className="cbtn v_controls_bb fa fa-repeat fa-3x",video.replay.style.zIndex=video.zindex+3,video.replay.style.display="block",video.replay.style.position="absolute",video.replay.style.cursor="pointer",video.replay.style.color="#FFF",video.replay.style.textShadow="0px 0px 14px rgba(0, 0, 0, 1)",video.container.appendChild(video.replay),video.replay.style.top=(video.container.offsetHeight-video.replay.offsetHeight)/2,video.replay.style.left=(video.container.offsetWidth-video.replay.offsetWidth)/2,video.replay.style.display="none",video.bigsound=document.createElement("span"),video.bigsound.id="v_controls_clickforsound",video.bigsound.className="cbtn v_controls_bb fa fa-volume-up fa-3x",video.bigsound.style.zIndex=video.zindex+3,video.bigsound.style.display="block",video.bigsound.style.position="absolute",video.bigsound.style.cursor="pointer",video.bigsound.style.color="#FFF",video.bigsound.style.textShadow="0px 0px 14px rgba(0, 0, 0, 1)",video.container.appendChild(video.bigsound),video.bigsound.style.top=(video.container.offsetHeight-video.bigsound.offsetHeight)/2,video.bigsound.style.left=(video.container.offsetWidth-video.bigsound.offsetWidth)/2,video.bigsound.style.display="none",video.spinner=document.createElement("span"),video.spinner.id="v_controls_spinner",video.spinner.className="v_controls_bb fa fa-circle-o-notch fa-spin fa-3x",video.spinner.style.zIndex=video.zindex+3,video.spinner.style.display="block",video.spinner.style.position="absolute",video.spinner.style.color="#FFF",video.spinner.style.textShadow="0px 0px 14px rgba(0, 0, 0, 1)",video.container.appendChild(video.spinner),video.spinner.style.top=(video.container.offsetHeight-video.spinner.offsetHeight)/2,video.spinner.style.left=(video.container.offsetWidth-video.spinner.offsetWidth)/2,video.spinner.style.display="none",d.addEventListener("click",video.controlHandler),n.addEventListener("click",video.controlHandler),a.addEventListener("click",video.controlHandler),v.addEventListener("click",video.controlHandler),video.allowfullscreen&&s.addEventListener("click",video.controlHandler),video.pbar.addEventListener("click",video.barSeek),video.phead.addEventListener("click",video.barSeek),video.container.addEventListener("mouseenter",function(e){video.isFS||video.isMobile||!video.videostarted||"block"==video.bigsound.style.display||"block"==video.replay.style.display||"block"==video.bigplay.style.display||(video.controller.style.display="block")}),video.container.addEventListener("mouseleave",function(e){video.controller.style.display="none"}),document.getElementById("v_controls_btn_bigplay").addEventListener("click",video.controlHandler),document.getElementById("v_controls_clickforsound").addEventListener("click",video.controlHandler),document.getElementById("v_controls_btn_bigreplay").addEventListener("click",video.controlHandler)},barSeek:function(e){var o=e.pageX-video.pbar.getBoundingClientRect().left,i=o/video.container.offsetWidth;video.seek(video.duration*i),"block"==document.getElementById("v_controls_btn_play").style.display&&video.proxy.play()},seek:function(e){video.proxy.currentTime=e},load:function(e,o){video.firstTime=!0,video.destroy(),video.spinner.style.display="block",o?(video.hasposter=!0,video.setPoster(o)):video.hasposter=!1,setTimeout(function(){var o=document.createElement("video");if(o.id="v_element",o.width=video.container.offsetWidth,o.height=video.container.offsetHeight,document.getElementById("v_player").appendChild(o),video.autoplay&&!video.isMobile&&o.setAttribute("autoplay",!0),video.isMobile&&(o.setAttribute("controls",!0),video.controller.style.display="none"),"object"==typeof e)e.forEach(function(e){var i=document.createElement("source");i.src=e,i.type=video.getMediaType(e),o.appendChild(i)});else{var i=document.createElement("source");i.src=e,i.type=video.getMediaType(e),o.appendChild(i)}video.proxy=document.getElementById("v_element"),video.setListeners(),!video.hasposter&&video.isMobile&&(video.spinner.style.display="none",video.bigplay.style.display="block"),video.proxy.style.display="none",video.proxy.addEventListener("click",video.controlHandler)},500)},setPoster:function(e){var o=new Image;o.onload=function(){console.log("loaded: "+e),video.poster.src=e,video.poster.style.display="block",video.isMobile&&(video.spinner.style.display="none",video.bigplay.style.display="block")},o.src=e},destroy:function(){video.videostarted=!1,video.proxy&&(console.log("destroying player"),video.removeListeners(),video.bigplay.style.display="none",video.bigsound.style.display="none",video.replay.style.display="none",video.poster.style.display="none",video.controller.style.display="none",video.proxy.pause(),video.proxy.src="",video.proxy.load(),video.proxy.parentNode.removeChild(video.proxy),video.proxy=null,document.getElementById("v_player").innerHTML="")},setListeners:function(){video.proxy.addEventListener("ended",video.dlEnded),video.proxy.addEventListener("play",video.dlPlay),video.proxy.addEventListener("pause",video.dlPause),video.proxy.addEventListener("volumechange",video.dlVolumeChange),video.proxy.addEventListener("timeupdate",video.dlTimeUpdate),video.proxy.addEventListener("canplay",video.dlCanPlay),video.proxy.addEventListener("progress",video.dlProgress)},removeListeners:function(){video.proxy.removeEventListener("ended",video.dlEnded),video.proxy.removeEventListener("play",video.dlPlay),video.proxy.removeEventListener("pause",video.dlPause),video.proxy.removeEventListener("volumechange",video.dlVolumeChange),video.proxy.removeEventListener("timeupdate",video.dlTimeUpdate),video.proxy.removeEventListener("canplay",video.dlCanPlay)},dlEnded:function(){video.hasposter?video.poster.style.display="block":video.isMobile||(video.replay.style.display="block",video.controller.style.display="none"),video.replay.style.display="block",video.proxy.style.display="none",video.bigsound.style.display="none",video.ulEnded()},dlPlay:function(){document.getElementById("v_controls_btn_pause").style.display="block",document.getElementById("v_controls_btn_play").style.display="none",video.startmuted&&video.autoplay&&!video.isMobile&&video.firstTime&&(video.proxy.muted=!0),video.ulPlay()},dlPause:function(){document.getElementById("v_controls_btn_pause").style.display="none",document.getElementById("v_controls_btn_play").style.display="block",video.ulPause()},dlVolumeChange:function(){video.proxy.muted?(document.getElementById("v_controls_btn_mute").style.display="none",document.getElementById("v_controls_btn_unmute").style.display="block"):(document.getElementById("v_controls_btn_mute").style.display="block",document.getElementById("v_controls_btn_unmute").style.display="none",video.bigsound.style.display="none"),video.ulVolumeChange()},dlProgress:function(){for(var e=0;e<video.proxy.buffered.length;e++)video.buffered=video.proxy.buffered.end(e)/video.duration*100;video.pbar.style.width=video.buffered+"%",video.ulProgress()},dlTimeUpdate:function(){video.firstTime&&(video.firstTime=!1,video.videostarted=!0,video.startmuted&&video.autoplay&&!video.isMobile&&(video.proxy.muted=!0,video.bigsound.style.display="block",video.controller.style.display="none")),"block"===video.bigplay.style.display&&(video.bigplay.style.display="none"),"block"===video.replay.style.display&&(video.replay.style.display="none"),"block"===video.spinner.style.display&&(video.spinner.style.display="none"),"block"===video.poster.style.display&&(video.poster.style.display="none"),"none"===video.proxy.style.display&&(video.proxy.style.display="block"),video.playhead=video.proxy.currentTime,video.duration=video.proxy.duration;var e=video.playhead/video.duration*100;video.phead.style.width=e+"%",video.ulTimeUpdate()},dlCanPlay:function(){video.firstTime&&(video.autoplay||(video.spinner.style.display="none",video.isMobile||(video.bigplay.style.display="block")),video.hasposter||video.autoplay||video.isMobile||(console.log("no poster"),video.bigplay.style.display="block",video.controller.style.display="none"),video.ulCanPlay())},ulEnded:function(){console.log("Video Ended")},ulPlay:function(){console.log("Video Play")},ulPause:function(){console.log("Video Paused")},ulVolumeChange:function(){console.log("Video Volume Change")},ulProgress:function(){},ulTimeUpdate:function(){},ulCanPlay:function(){console.log("Video Ready")},controlHandler:function(e){switch(e.currentTarget.id){case"v_controls_btn_play":video.proxy.play();break;case"v_controls_btn_pause":video.proxy.pause();break;case"v_controls_btn_mute":video.proxy.muted=!0;break;case"v_controls_btn_unmute":video.proxy.muted=!1;break;case"v_controls_btn_fs":video.goFS();break;case"v_controls_btn_bigplay":video.proxy.play(),video.spinner.style.display="block",video.bigplay.style.display="none";break;case"v_controls_btn_bigreplay":video.proxy.play(),video.spinner.style.display="none",(video.replaywithsound||video.isMobile)&&(video.proxy.muted=!1),video.controller.style.display=video.isMobile?"none":"block";break;case"v_controls_clickforsound":video.proxy.muted=!1,video.seek(0),video.controller.style.display="block";break;case"v_element":"block"!=document.getElementById("v_controls_btn_play").style.display||"none"!=document.getElementById("v_controls_clickforsound").style.display||video.isMobile||video.proxy.play(),"block"!=document.getElementById("v_controls_btn_pause").style.display||"none"!=document.getElementById("v_controls_clickforsound").style.display||video.isMobile||video.proxy.pause()}},goFS:function(){console.log("request fullscreen"),video.proxy.requestFullscreen?(video.proxy.requestFullscreen(),video.isFS=!0):video.proxy.mozRequestFullScreen?(video.proxy.mozRequestFullScreen(),video.isFS=!0):video.proxy.webkitRequestFullscreen&&(video.proxy.webkitRequestFullscreen(),video.isFS=!0)},getMediaType:function(e){return video.mTypes[e.split(".")[e.split(".").length-1]]}};