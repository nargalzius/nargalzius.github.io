<!DOCTYPE html>
<html>
  <head>
    <title>gmaps.js Helper Class</title>
    <link rel="stylesheet" type="text/css" href="../../../f/c/readme.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
  </head>
  <body>
    <header id="info"><img id="logo" src="../../../img/joystick/logo.png"><h2>Helper Class for gmaps.js</h2>

<p>A GoogleMaps helper class for <a href="http://hpneo.github.io/gmaps">gmaps.js</a> that allows quicker implementation of common requested &quot;features&quot; for work demos.</p>

<p>It&#39;s primary purpose is as a &quot;marker helper&quot; - because that&#39;s a given whenever I make demos that involve using an interactive map. I decided to call it a general helper class in case more &quot;features&quot; are added down the road.</p>

<p>It still uses the default <code>infoWindow</code> of GoogleMaps, but it provides a much easier way of plugging in and customizing the <code>content</code> variable of said <code>infoWindow</code></p>

<p>I decided to call it a general helper class in case more features are added down the road.</p>
      <h3>Resources</h3>
      <ul>
        <li><a href="#usage">Getting Started</a></li>
        <li><a target="_blank" href="http://jsfiddle.net/nargalzius/B2Hdt">Sandbox</a> (JSFiddle)</li>
        <li><a href="#api">Full Documentation  </a></li>
        <li><a target="_blank" href="http://nargalzius.github.io/ajax/joystick/gmaps_helper/1.0/gmaps_helper.js">Latest Build</a> (.js)</li>
        <li><a href="#changelog">Changelog</a></li>
      </ul><h3>Dependencies</h3>

<ul><li><a href="http://jquery.com">jQuery</a></li><li><a href="http://maps.google.com/maps/api/js?sensor=true">GoogleMaps API</a></li><li><a href="http://hpneo.github.io/gmaps">gmaps.js</a></li></ul>
    </header>
    <section id="usage">
      <h2>Quick Start</h2>
      <p>Include the following scripts in your document's <code>&lt;head></code></p>
      <pre class="syntax html">&lt;script src=&quot;http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://maps.google.com/maps/api/js?sensor=true&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.3/gmaps.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://nargalzius.github.io/ajax/joystick/gmaps_helper/1.0/gmaps_helper.js&quot;&gt;&lt;/script&gt;
</pre>
      <p>Below is the minimum markup you'll need; basically just a container for the map.</p>
      <pre class="syntax html">&lt;div id=&quot;map&quot;&gt;&lt;/div&gt;
</pre>
      <p>Finally, initialize it like so:</p>
      <pre class="syntax javascript">$(document).ready(function(){
 shiv.init();
});
</pre><p>Take note that the actual GMaps object of gmaps.js is initialized through the helper. However, the <code>map</code> variable is reserved and assigned to the main map object when initialized. This means you can still access the main <code>GMaps</code> object normally through <code>map</code> (i.e. <code>map.hideInfoWindows()</code> &amp; <code>shiv.proxy.hideInfoWindows()</code> &amp; <code>shiv.hidePopups()</code> to the same thing)</p>

<p>Again, this is <em>minimal</em> code to get things working. Be sure to check out all the other &quot;features&quot; by playing with it in the <a href="http://jsfiddle.net/nargalzius/B2Hdt">sandbox</a></p>
    </section>
    <section id="api">
      <h2>API</h2>
      <ul>
        <li><strong><code>center</code></strong><code>:string =</code><em><code>'40.72423,-73.999186'</code></em>
          <p>A comma-delimited <code>lat</code>/<code>lng</code> string for the map origin point. This allows for faster <code>lat</code>/<code>lng</code> input instead of creating an object with two separate values.</p>
        </li>
        <li><strong><code>container</code></strong><code>:string =</code><em><code>'#map'</code></em>
          <p>DOM element <code>id</code> where the map will be plugged into.</p>
        </li>
        <li><strong><code>zoom</code></strong><code>:number =</code><em><code>13</code></em>
          <p>Default zoom setting of the map.</p>
        </li>
        <li><strong><code>icon</code></strong><code>:string =</code><em><code>null</code></em>
          <p>Custom <strong>global</strong> marker icon.</p>
        </li>
        <li><strong><code>iwID</code></strong><code>:string =</code><em><code>'infoWindow'</code></em>
          <p>Designated infoWindow class. This is injected into the infoWindow's <code>content</code> to allow easy styling of the elements within. </p>
          <p>Take note that while it's designated as an <strong>id</strong>, it's actually injected as a <strong>class</strong>. So be sure to access it through <code>.infoWindow</code>.</p>
        </li>
        <li><strong><code>w</code></strong><code>: =</code><em><code>null,</code></em><br/><strong><code>h</code></strong><code>: =</code><em><code>null</code></em>
          <p>Map canvas dimensions. It's recommended to set this via CSS, but if you're too lazy and just want to see something appear immediately, you can set it here. It's also worth remembering that setting this will <strong>bypass</strong> any value set via CSS</p>
        </li>
        <li><strong><code>markers</code></strong><code>:array =</code><em><code>null</code></em>
          <p>An array of marker objects. The base implementation can recognize the following object keys:</p>
          <p>A complete marker object is as follows: <em>{ <strong>loc</strong>: string, <strong>icon</strong>: string, <strong>info</strong>: { <strong>pic</strong>: string, <strong>header</strong>: string, <strong>details</strong>: text } }</em>
            <ul>
              <li><strong><code>loc</code></strong><code>:string</code>
                <p>Comma-delimited <code>lat</code>/<code>lng</code> coordinates (e.g. <code>40.72423,-73.999186</code>) just like with the <code>center</code> variable</p>
              </li>
              <li><strong><code>icon</code></strong><code>:string</code>
                <p>Marker icon for the specific marker. In the event you have the <em>global</em> <code>icon</code> set, any marker with individual <code>icon</code> variables set will override the global icon. Any marker that doesn't, will use the global icon.  </p>
                <p>The same goes for not having a global icon set; any marker without an individual icon set will default to GoogleMaps' generic marker icon.</p>
              </li>
              <li><strong><code>info</code></strong><code>:string</code> <em>or</em> <code>object</code>
                <p>If set, this automatically will generate an infoWindow, depending on the datatype.  </p>
                <p>If it's a string, it simply displays the text on the infowindow (still could be styled through <code>.infoWindow .info</code> class). If it's an object, it'll accept one, two, or all three of the keys: <code>pic</code> for an image, <code>header</code> for a title, and <code>details</code> for the blurb.  </p>
                <p>While the class automatically generates the divs and assigns the classes for each of these elements, it <strong>does not</strong> style them - so the user is still required to style the <code>.infoWindow</code> class and all its contents through CSS</p>
              </li>
            </ul>
          </p>
        </li>
        <li><strong><code>template</code></strong><code>:function =</code><em><code>null</code></em>
          <p>This is the most powerful feature for customizing markers. You can have something like:</p>
          <pre class="quickCode syntax javascript">var markerArray = [
 { loc: '40.730994,-74.003134', info: { url: 'http://google.com', name: 'Google Inc.' } },
 { loc: '40.717595,-74.001417', info: { url: 'http://microsoft.com', name: 'Microsoft'} }
];

$(document).ready(function(){
 shiv.init({
  markers: markerArray,
  template: customTemplate
 });
});

function customTemplate(num) {
 // PLACEHOLDER OBJECT
 var tempStr = $('&lt;div&gt;');
 
 // DYNAMICALLY POPULATE PLACEHOLDER
 $('&lt;div&gt;')
  .append($('&lt;a&gt;').attr({
   'href': markerArray[num].info.url,
   'target': '_blank'
  }).text(markerArray[num].info.name))
  .appendTo(tempStr);
 $('&lt;div&gt;').text('lat: '+markerArray[num].loc.split(',')[0]).appendTo(tempStr);
 $('&lt;div&gt;').text('lng: '+markerArray[num].loc.split(',')[1]).appendTo(tempStr);
 
 // CONVERT TO HTML STRING AND PASS BACK AS OBJECT TO gmaps.js
 return { content: generateIWC(tempStr) };
}
</pre>
          <p>What happens is that if the class detects a <code>template</code> function, it will <strong>ignore</strong> the contents of the <code>info</code> key as basis of automatic marker generation and will instead generate the infoWindow <code>content</code> values based on the callback. </p>
          <p>Since it's no longer relaint on any particular value in the object, you can construct the callback function to generate pretty much anything. The only limitation is that it's <em>ultimately</em> going to be injected in Googlemaps' standard infoWindow.</p>
          <p>The number will serve as an index of the selected object from the marker array - meaning the function runs for every item on the list - and you can reference <strong>any</strong> value of that particular object. </p>
          <p>Yes, that means you're not limited by the contents of the <code>info</code> object. As demonstrated by the code above, you have now put arbitrary keys (e.g. <code>url</code>, <code>name</code>) in the <code>info</code> object instead of the usual <code>pic</code>, <code>header</code>, & <code>details</code>. In addition to that, we've also used values <em>outside</em> of it (e.g. <code>loc</code>)</p>
        </li>
      </ul>
    </section>
    <section id="changelog"><h2>Changelog</h2>

<h1><a href="http://nargalzius.github.io/ajax/joystick/gmaps_helper/1.0/expandChild.js">1.0</a></h1>

<ul><li>Initial release</li></ul>
    </section>
    <script>
      $(document).ready(function() {
       $('.syntax').each(function(i, e) {hljs.highlightBlock(e)});
      });
    </script>
  </body>
</html>